@inject IJSRuntime JSRuntime

<button @onclick="ToggleTheme" class="theme-toggle-btn" title="Toggle theme">
    @if (currentTheme == "dark")
    {
        <span>‚òÄÔ∏è</span>
    }
    else
    {
        <span>üåô</span>
    }
</button>

@code {
    private string currentTheme = "light";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                currentTheme = await JSRuntime.InvokeAsync<string>("themeManager.getTheme");
                StateHasChanged();
            }
            catch
            {
                // Default to light theme if unable to get from localStorage
                currentTheme = "light";
            }
        }
    }

    private async Task ToggleTheme()
    {
        currentTheme = currentTheme == "light" ? "dark" : "light";
        try
        {
            await JSRuntime.InvokeVoidAsync("themeManager.setTheme", currentTheme);
        }
        catch
        {
            // Silently fail if unable to set theme
        }
    }
}
